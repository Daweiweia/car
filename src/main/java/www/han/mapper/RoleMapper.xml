<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="www.han.mapper.RoleMapper">
    <select id="getRoles" parameterType="String" resultType="String">
        select role_name from sh_role where id = (
            select role_id from sh_user_role where user_id = (
             select user_id  from car.user
                where user_name = #{userName}
        )
        )
    </select>
    <!--默认注册的角色为等级2对应的是user-->
    <insert id="addRole" parameterType="int">
        insert into sh_user_role (user_id,role_id) values (#{userId},2)
    </insert>
    <select id="getRoleListLimit" parameterType="int" resultType="roleToUser">
        select user_name,role_name from user,sh_role,sh_user_role
        where sh_user_role.user_id = user.user_id
        and sh_user_role.role_id = sh_role.id
        limit #{start},#{pageSize}
    </select>
    <select id="getRoleSize" resultType="int">
        select count(1) from sh_user_role
    </select>
</mapper>